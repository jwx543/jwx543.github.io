<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>新建虚拟机，部署个人主页</title>
    <link href="/2022/04/18/%E4%BA%91%E8%AE%A1%E7%AE%97-%E7%BD%91%E9%A1%B5%E9%83%A8%E7%BD%B2/"/>
    <url>/2022/04/18/%E4%BA%91%E8%AE%A1%E7%AE%97-%E7%BD%91%E9%A1%B5%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<h1 id="新建虚拟机，部署个人主页"><a href="#新建虚拟机，部署个人主页" class="headerlink" title="新建虚拟机，部署个人主页"></a>新建虚拟机，部署个人主页</h1><h2 id="Java安装"><a href="#Java安装" class="headerlink" title="Java安装"></a>Java安装</h2><ol><li><p>安装vim</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo apt-get install vim-gtk<br></code></pre></td></tr></table></figure></li><li><p>获取root权限</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo passwd root    \\初次设置密码<br>su    \\root权限<br></code></pre></td></tr></table></figure></li></ol><h2 id="安装Java"><a href="#安装Java" class="headerlink" title="安装Java"></a>安装Java</h2><ol><li><p>更新软件包列表：</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo apt-get update<br></code></pre></td></tr></table></figure></li><li><p>安装openjdk-8-jdk：</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo apt-get install openjdk-<span class="hljs-number">8</span>-jdk<br></code></pre></td></tr></table></figure></li><li><p>查看java版本，看看是否安装成功：</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">java -version<br></code></pre></td></tr></table></figure></li></ol><h2 id="安装Tomcat"><a href="#安装Tomcat" class="headerlink" title="安装Tomcat"></a>安装Tomcat</h2><ol><li><p><a href="[https://tomcat.apache.org/download-10.cgi](https://tomcat.apache.org/download-10.cgi">下载Tomcat包</a>)</p><p> <img src="/img/云计算/1.png" alt="1"></p></li><li><p>解压Tomcat</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo tar -zxvf apache-tomcat-<span class="hljs-number">10.0</span><span class="hljs-number">.11</span>.tar.gz -C /usr/local<br></code></pre></td></tr></table></figure></li><li><p>编辑Tomcat启动脚本</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo vim /usr/local/apache-tomcat-<span class="hljs-number">10.0</span><span class="hljs-number">.11</span>/bin/startup.sh<br></code></pre></td></tr></table></figure></li><li><p>最后一行<strong><em>exec</em></strong>之前写入JDK路径:</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx">JAVA_HOME=<span class="hljs-regexp">/usr/</span>lib/jvm/jdk1<span class="hljs-number">.8</span><span class="hljs-number">.0_121</span><br>JRE_HOME=$&#123;JAVA_HOME&#125;/jre<br>CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib<br>PATH=$JAVA_HOME/bin:$PATH<br>TOMCAT_HOME=<span class="hljs-regexp">/usr/</span>local/apache-tomcat-<span class="hljs-number">10.0</span><span class="hljs-number">.11</span><br></code></pre></td></tr></table></figure></li><li><p>修改Tomcat启动端口</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo vi ./apache-tomcat-<span class="hljs-number">10.0</span><span class="hljs-number">.11</span>/conf/server.xml<br><br>&lt;Connector port=<span class="hljs-string">&quot;9000&quot;</span> protocol=<span class="hljs-string">&quot;HTTP/1.1&quot;</span><br></code></pre></td></tr></table></figure><p> 在文件这修改Tomcat启动时使用的端口号</p><p> 端口修改完成后，重启Java和Tomcat</p></li><li><p>启动Tomcat</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo ./bin/startup.sh<br></code></pre></td></tr></table></figure></li><li><p>验证Tomcat配置</p><ol><li>在浏览器中输入：<a href="http://localhost:8080/">http://localhost:8080/</a></li><li>或者 <strong><em>ps aux|grep tomcat</em></strong></li><li>查看Tomcat服务器的Log信息：<strong><em>sudo cat ./apache-tomcat-8.5.12/logs/catalina.out</em></strong></li></ol></li></ol><h2 id="部署包"><a href="#部署包" class="headerlink" title="部署包"></a>部署包</h2><ol><li><p>包移动到<strong><em>webapps</em></strong>中</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">mv 01_deploy /usr/local/apache-tomcat-<span class="hljs-number">10.0</span><span class="hljs-number">.11</span>/webapps/<br></code></pre></td></tr></table></figure></li><li><p>运行</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">localhost:<span class="hljs-number">8080</span>/01_deploy<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>云计算</category>
      
    </categories>
    
    
    <tags>
      
      <tag>云计算</tag>
      
      <tag>网页</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>配置虚拟网络，检测不同网络传输效率</title>
    <link href="/2022/04/18/%E4%BA%91%E8%AE%A1%E7%AE%97-%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C/"/>
    <url>/2022/04/18/%E4%BA%91%E8%AE%A1%E7%AE%97-%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C/</url>
    
    <content type="html"><![CDATA[<h1 id="配置虚拟网络，检测不同网络传输效率"><a href="#配置虚拟网络，检测不同网络传输效率" class="headerlink" title="配置虚拟网络，检测不同网络传输效率"></a>配置虚拟网络，检测不同网络传输效率</h1><p>任务：新建不同区域、可用区的虚拟机，配置虚拟网络，检测不同网络传输效率。</p><h2 id="测试网络传输效率"><a href="#测试网络传输效率" class="headerlink" title="测试网络传输效率"></a>测试网络传输效率</h2><ol><li><p>安装iPerf3</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo apt-get install iperf3  #（version3）<br>sudo apt-get install iperf   #（默认是version2）<br>sudo apt-get install traceroute<br><br>apt install netperf<br></code></pre></td></tr></table></figure></li><li><p>测试服务器间速度</p><ol><li><p>服务器a，等待被测</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">iperf3 -s<br><br>netserver -p <span class="hljs-number">4444</span><br></code></pre></td></tr></table></figure></li><li><p>服务器b，去测试</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"># -p表示指定的端口号，如果未指定，将使用默认端口5201。-t表示测试应运行多长时间，我在此处指定了10秒。iPerf 支持很多参数<br>iperf3 -c &lt;B服务器IP地址&gt; -p <span class="hljs-number">5201</span> -t <span class="hljs-number">10</span><br><br>netperf -H &lt;B服务器IP地址&gt; -l <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure></li></ol></li></ol><h2 id="详细结果"><a href="#详细结果" class="headerlink" title="详细结果"></a>详细结果</h2><ol><li>构建四台虚拟服务器A, B, C, D，带宽为Mbits/s</li><li><p>A 与 B 为相同区域和可用区；</p><p> A 与 C 为相同区域但不同可用区</p><p> A 与 D 为不同区域（此时可用区应该不相同）</p></li><li><p>测试结果</p><p> A→B 私网：</p><p> A→B 公网：</p><p> A→C 私网：</p><p> A→C 公网：</p><p> A→D 私网：</p><p> A→D 公网：</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>云计算</category>
      
    </categories>
    
    
    <tags>
      
      <tag>云计算</tag>
      
      <tag>虚拟网络</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spark安装</title>
    <link href="/2022/04/18/%E4%BA%91%E8%AE%A1%E7%AE%97-Spark%E5%AE%89%E8%A3%85/"/>
    <url>/2022/04/18/%E4%BA%91%E8%AE%A1%E7%AE%97-Spark%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h1 id="Spark安装"><a href="#Spark安装" class="headerlink" title="Spark安装"></a>Spark安装</h1><h2 id="安装vim"><a href="#安装vim" class="headerlink" title="安装vim"></a>安装vim</h2><p>all</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">sudo apt-get install vim-gtk<br></code></pre></td></tr></table></figure><h2 id="安装Java"><a href="#安装Java" class="headerlink" title="安装Java"></a>安装Java</h2><p>all</p><ol><li><p>更新软件包列表：</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo apt-get update<br></code></pre></td></tr></table></figure></li><li><p>安装openjdk-8-jdk：</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">sudo apt-get install openjdk-<span class="hljs-number">8</span>-jdk<br></code></pre></td></tr></table></figure></li><li><p>查看java版本，看看是否安装成功：</p> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">java -version<br></code></pre></td></tr></table></figure></li></ol><h2 id="Hadoop集群"><a href="#Hadoop集群" class="headerlink" title="Hadoop集群"></a>Hadoop集群</h2><p>参考：<a href="https://blueskyson.github.io/2020/03/06/hadoop-installation/">https://blueskyson.github.io/2020/03/06/hadoop-installation/</a></p><ol><li><p>官网下载Apache Hadoop， 解压并移动</p><p> master</p><p> 地址：<a href="https://hadoop.apache.org/releases.html">https://hadoop.apache.org/releases.html</a> 或 <a href="https://dlcdn.apache.org/hadoop/common/">https://dlcdn.apache.org/hadoop/common/</a></p><p> 解压：</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx">sudo tar -zxvf hadoop-3.3.1.tar.gz -C &#x2F;usr&#x2F;local<br>mv .&#x2F;hadoop-3.3.1&#x2F; .&#x2F;hadoop<br></code></pre></td></tr></table></figure></li><li><p>编辑环境变数</p><p> all</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">vim ~&#x2F;.bashrc<br></code></pre></td></tr></table></figure><p> 打开bashrc，环境变数设置如下:</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tsx"># ~&#x2F;.bashrc: executed by bash(1) for non-login shells.<br># see &#x2F;usr&#x2F;share&#x2F;doc&#x2F;bash&#x2F;examples&#x2F;startup-files (in the package bash-doc)<br># for examples<br><br>. . .<br><br># hadoop environment variables<br>export JAVA_HOME&#x3D;&#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;&quot;java-1.8.0-openjdk-amd64&quot;<br>export CLASSPTH&#x3D;$JAVA_HOME&#x2F;lib<br>export HADOOP_INSTALL&#x3D;&#x2F;usr&#x2F;local&#x2F;&quot;hadoop&quot;<br>export PATH&#x3D;$PATH:$HADOOP_INSTALL&#x2F;bin<br>export PATH&#x3D;$PATH:$HADOOP_INSTALL&#x2F;sbin<br>export HADOOP_MAPRED_HOME&#x3D;$HADOOP_INSTALL<br>export HADOOP_COMMON_HOME&#x3D;$HADOOP_INSTALL<br>export YARN_HOME&#x3D;$HADOOP_INSTALL<br>export HADOOP_COMMON_LIB_NATIVE_DIR&#x3D;$HADOOP_INSTALL&#x2F;lib&#x2F;native<br>export HADOOP_OPTS&#x3D;&quot;-Djava.library.path&#x3D;$HADOOP_INSTALL&#x2F;lib&quot;<br>export HADOOP_CLASSPATH&#x3D;$(hadoop classpath)<br><br>. . .<br></code></pre></td></tr></table></figure><p> 查看是否安装成功</p><p> master成功，slave还未安装</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx">source ~&#x2F;.bashrc<br>hadoop version<br></code></pre></td></tr></table></figure></li><li><p>编辑Hadoop 设定档</p><p> master</p><p> 首先指定file system 的主机位置</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx">cd &#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;etc&#x2F;hadoop&#x2F;<br>vim core-site.xml<br></code></pre></td></tr></table></figure> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- namenode的位置 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hadoop.tmp.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:/usr/local/hadoop/tmp<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Abase for other temporary directories.<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>fs.defaultFS<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hdfs://master:9000<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p> 指定datanode 及namenode 的储存位置，这里以/usr/local/hadoop 为例</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">vim hdfs-site.xml<br></code></pre></td></tr></table></figure> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- hdfs的數據副本數量 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.replication<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- namenode的儲存位置 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.namenode.name.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:/usr/local/hadoop/tmp/dfs/name<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- datanode的儲存位置 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>dfs.datanode.data.dir<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>file:/usr/local/hadoop/tmp/dfs/data<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p> 修改mapred-site.xml</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">vim mapred-site.xml<br></code></pre></td></tr></table></figure> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.framework.name<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>yarn<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p> 修改yarn-site.xml</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">vim yarn-site.xml<br></code></pre></td></tr></table></figure> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-comment">&lt;!-- Site specific YARN configuration properties --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>mapreduce_shuffle<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>master<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p> 修改<a href="http://hadoop-env.sh/">hadoop-env.sh</a></p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml">export HDFS_NAMENODE_USER=root<br>export HDFS_DATANODE_USER=root<br>export HDFS_SECONDARYNAMENODE_USER=root<br>export YARN_RESOURCEMANAGER_USER=root<br>export YARN_NODEMANAGER_USER=root<br>export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64<br></code></pre></td></tr></table></figure></li><li><p>设置workers文件</p><p> all</p></li><li><p>先设置好四台虚拟机 /etc/hostname 中的主机名（分别为master、slave01、slave02、slave03）</p><p> all</p></li><li><p>然后设置四台虚拟机 /etc/hosts 加入主机名和对应ip，例如：</p><p> all</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tsx"># 输入对应的ip地址<br>116.63.170.127 master<br>ip2 slave01<br>ip3 slave02<br>ip4 slave03<br></code></pre></td></tr></table></figure></li><li><p>ping测试</p><p> all</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tsx">ping master<br>ping slave01<br>ping slave02<br>ping slave03<br></code></pre></td></tr></table></figure></li><li><p>ssh免密，在三台服务器上同时操作</p><p> all</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tsx">ssh-keygen -t rsa<br>ssh-copy-id master<br>ssh-copy-id slave01<br>ssh-copy-id slave02<br>ssh-copy-id slave03<br></code></pre></td></tr></table></figure></li><li><p>在 master 节点主机上执行：</p><p> master</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tsx">cd &#x2F;usr&#x2F;local&#x2F;<br>rm -rf .&#x2F;hadoop&#x2F;tmp # 删除临时文件rm -rf<br>rm -rf .&#x2F;hadoop&#x2F;logs&#x2F;* # 删除日志文件<br>tar -zcf ~&#x2F;hadoop.master.tar.gz .&#x2F;hadoop<br>cd ~<br>scp .&#x2F;hadoop.master.tar.gz slave01:&#x2F;home&#x2F;<br>scp .&#x2F;hadoop.master.tar.gz slave02:&#x2F;home&#x2F;<br>scp .&#x2F;hadoop.master.tar.gz slave03:&#x2F;home&#x2F;<br></code></pre></td></tr></table></figure></li><li><p>在slave01,slave02,slave03节点上执行：</p><p>slave</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx">sudo rm -rf &#x2F;usr&#x2F;local&#x2F;hadoop&#x2F; #删掉原来的hadoop<br>sudo tar -zxf ~&#x2F;hadoop.master.tar.gz -C &#x2F;usr&#x2F;local<br>sudo chown -R root &#x2F;usr&#x2F;local&#x2F;hadoop<br></code></pre></td></tr></table></figure></li><li><p>开始运作Hadoop</p><p>all</p><p>启动顺序为 namenode格式化-&gt;start-&gt;stop，之后启动就不需要格式化</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx">cd &#x2F;usr&#x2F;local&#x2F;hadoop<br>bin&#x2F;hdfs namenode -format<br>sbin&#x2F;start-all.sh<br></code></pre></td></tr></table></figure></li></ol><h2 id="安装Scala"><a href="#安装Scala" class="headerlink" title="安装Scala"></a>安装Scala</h2><p>all</p><ol><li>解压，移到/usr/local/share</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml">sudo tar -zxvf scala-2.13.6.tgz -C /usr/local/<br>mv ./scala-2.13.6/ ./scala<br></code></pre></td></tr></table></figure><ol><li><p>修改环境变量</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx">sudo chmod -R 777 &#x2F;usr&#x2F;local&#x2F;scala&#x2F;<br>vim &#x2F;etc&#x2F;profile<br></code></pre></td></tr></table></figure> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">export PATH&#x3D;&quot;$PATH:&#x2F;usr&#x2F;local&#x2F;scala&#x2F;bin&quot;<br></code></pre></td></tr></table></figure></li></ol><h2 id="Spark集群"><a href="#Spark集群" class="headerlink" title="Spark集群"></a>Spark集群</h2><ol><li><p>解压， 移到/usr/local</p><p> master</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx">sudo tar -zxvf spark-3.1.2-bin-hadoop3.2.tgz -C &#x2F;usr&#x2F;local<br>mv .&#x2F;spark-3.1.2-bin-hadoop3.2&#x2F; .&#x2F;spark<br></code></pre></td></tr></table></figure></li><li><p>配置spark环境变量</p><p> all</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">vim ~&#x2F;.bashrc<br></code></pre></td></tr></table></figure> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx">export SPARK_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;spark<br>export PATH&#x3D;$PATH:$SPARK_HOME&#x2F;bin:$SPARK_HOME&#x2F;sbin<br># export PATH&#x3D;$SPARK_HOME&#x2F;bin:$PATH<br></code></pre></td></tr></table></figure> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx">source ~&#x2F;.bashrc<br>spark-shell    # test<br></code></pre></td></tr></table></figure></li><li><p>Spark配置</p><p> master节点主机：</p><p> master</p><ul><li><p>配置slaves文件 将 slaves.template 拷贝到 slaves</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx">cd &#x2F;usr&#x2F;local&#x2F;spark&#x2F;<br>cp .&#x2F;conf&#x2F;workers.template .&#x2F;conf&#x2F;workers<br></code></pre></td></tr></table></figure></li><li><p>slaves文件设置Worker节点。编辑workers内容,把默认内容localhost替换成如下内容：</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tsx">master #master主机既作为master，也作为worker<br>slave01<br>slave02<br>slave03<br></code></pre></td></tr></table></figure></li><li><p>配置spark-env.sh文件, 将 spark-env.sh.template 拷贝到 <a href="http://spark-env.sh/">spark-env.sh</a></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">cp .&#x2F;conf&#x2F;spark-env.sh.template .&#x2F;conf&#x2F;spark-env.sh<br></code></pre></td></tr></table></figure></li><li><p><a href="http://xn--spark-env-4s8x893k.sh/">编辑spark-env.sh</a>,添加如下内容：</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tsx">export SPARK_DIST_CLASSPATH&#x3D;$(&#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;bin&#x2F;hadoop classpath)<br>export HADOOP_CONF_DIR&#x3D;&#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;etc&#x2F;hadoop<br>export SCALA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;share&#x2F;scala<br>export HADOOP_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;hadoop<br>export SPARK_MASTER_IP&#x3D;192.168.0.125 #指定 Spark 集群 Master 节点的 IP 地址；<br>export SPARK_MASTER_PORT&#x3D;7077<br>export SPARK_MASTER_HOST&#x3D;192.168.0.125   #指定 Spark 集群 Master 节点的 IP 地址；<br>export SPARK_EXECUTOR_MEMORY&#x3D;256m #大小看虚拟机内存<br></code></pre></td></tr></table></figure></li><li><p>配置好后，将Master主机上的/usr/local/spark文件夹复制到各个节点上。在Master主机上执行如下命令：</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tsx">cd &#x2F;usr&#x2F;local&#x2F;tar -zcf ~&#x2F;spark.master.tar.gz .&#x2F;spark<br>cd ~<br>scp .&#x2F;spark.master.tar.gz slave01:&#x2F;home&#x2F;<br>scp .&#x2F;spark.master.tar.gz slave02:&#x2F;home&#x2F;<br>scp .&#x2F;spark.master.tar.gz slave03:&#x2F;home&#x2F;<br></code></pre></td></tr></table></figure></li><li><p>在slave01,slave02,slave03节点操作：</p><p>  slave</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx">sudo rm -rf &#x2F;usr&#x2F;local&#x2F;spark&#x2F;<br>sudo tar -zxf ~&#x2F;spark.master.tar.gz -C &#x2F;usr&#x2F;local<br>sudo chown -R root &#x2F;usr&#x2F;local&#x2F;spark<br></code></pre></td></tr></table></figure></li></ul></li><li><p>启动Hadoop集群</p><ul><li><p>启动Spark集群前，要先启动Hadoop集群。在Master节点主机上运行如下命令：</p><p>  all</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;sbin&#x2F;start-all.sh<br></code></pre></td></tr></table></figure></li></ul></li><li><p>启动Spark集群</p><ul><li><p>启动Master节点, 在Master节点主机上运行如下命令：</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx">cd &#x2F;usr&#x2F;local&#x2F;spark&#x2F;<br>sbin&#x2F;start-master.sh -h 103.47.82.178 #（master的ip）<br></code></pre></td></tr></table></figure></li><li><p>在Master节点上运行jps命令，可以看到多了个Master进程：</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">jps<br></code></pre></td></tr></table></figure></li><li><p>启动所有Slave节点, 在Master节点主机上运行如下命令：</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">sbin&#x2F;start-slaves.sh<br></code></pre></td></tr></table></figure><p>  分别在slave01、slave02、slave03节点上运行jps命令，可以看到多了个Worker进程</p></li><li><p>在浏览器上查看Spark独立集群管理器的集群信息 在master主机上打开浏览器，访问<a href="http://master:8080">http://master:8080</a></p></li></ul></li><li><p>关闭</p><p> all</p><ul><li><p>关闭Master节点</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">sbin&#x2F;stop-master.sh<br></code></pre></td></tr></table></figure></li><li><p>关闭Worker节点</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">sbin&#x2F;stop-slaves.sh<br></code></pre></td></tr></table></figure></li><li><p>关闭Hadoop集群</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#x2F;usr&#x2F;local&#x2F;hadoop&#x2F;sbin&#x2F;stop-all.sh<br></code></pre></td></tr></table></figure></li></ul></li></ol><h2 id="HDFS传文件"><a href="#HDFS传文件" class="headerlink" title="HDFS传文件"></a>HDFS传文件</h2><p><a href="https://blog.csdn.net/qq_43584847/article/details/98874497">如何上传文件到hdfs？_努力变得不菜的菜鸡的博客-CSDN博客_上传文件到hdfs</a></p>]]></content>
    
    
    <categories>
      
      <category>云计算</category>
      
    </categories>
    
    
    <tags>
      
      <tag>云计算</tag>
      
      <tag>Spark</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>必知必会</title>
    <link href="/2022/04/18/%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/"/>
    <url>/2022/04/18/%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="必知必会"><a href="#必知必会" class="headerlink" title="必知必会"></a>必知必会</h1><h2 id="1-检索数据"><a href="#1-检索数据" class="headerlink" title="1. 检索数据"></a>1. 检索数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column_name <span class="hljs-keyword">from</span> table1<br><span class="hljs-keyword">select</span> colum1, colum2 <span class="hljs-keyword">from</span> table1<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> table1<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> column_name <span class="hljs-keyword">from</span> table1 ## 唯一<br><span class="hljs-keyword">select</span> column_name <span class="hljs-keyword">from</span> table1 limit <span class="hljs-number">5</span>  ## 返回不超过<span class="hljs-number">5</span>行的数据<br>## 第二个数字是指从哪儿开始，第一个数字是检索的行数<br>## 第一个被检索的行是第<span class="hljs-number">0</span>行，而不是第<span class="hljs-number">1</span>行<br><span class="hljs-keyword">select</span> column_name <span class="hljs-keyword">from</span> table1 limit <span class="hljs-number">5</span>  offest <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h2 id="2-排序检索数据"><a href="#2-排序检索数据" class="headerlink" title="2. 排序检索数据"></a>2. 排序检索数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column_name <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> column_name<br><span class="hljs-keyword">select</span> column_name <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> column1, column2<br><span class="hljs-keyword">select</span> column1, column2, column3 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> <span class="hljs-number">2</span>, <span class="hljs-number">3</span><br><span class="hljs-keyword">select</span> column_name <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> column1 <span class="hljs-keyword">desc</span>, column2<br></code></pre></td></tr></table></figure><h2 id="3-过滤数据"><a href="#3-过滤数据" class="headerlink" title="3. 过滤数据"></a>3. 过滤数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-operator">=</span> xx<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-keyword">between</span> A <span class="hljs-keyword">and</span> B<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span><br></code></pre></td></tr></table></figure><h2 id="4-高级数据过滤"><a href="#4-高级数据过滤" class="headerlink" title="4. 高级数据过滤"></a>4. 高级数据过滤</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;AA&#x27;</span> <span class="hljs-keyword">and</span> column2 <span class="hljs-operator">&lt;</span> B<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;AA&#x27;</span> <span class="hljs-keyword">or</span> column2 <span class="hljs-operator">&lt;</span> B<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-keyword">in</span> (<span class="hljs-string">&#x27;AA&#x27;</span>, <span class="hljs-string">&#x27;BB&#x27;</span>) <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> column2<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> <span class="hljs-keyword">not</span> column1 <span class="hljs-operator">=</span> &quot;AA&quot;<br></code></pre></td></tr></table></figure><h2 id="5-用通配符进行过滤"><a href="#5-用通配符进行过滤" class="headerlink" title="5. 用通配符进行过滤"></a>5. 用通配符进行过滤</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;F%&#x27;</span>  ## F开头所有字符<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;F_&#x27;</span>  ## F开头两个字符<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;[AB]&#x27;</span>    ## AB中一个<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;[^AB]&#x27;</span>   ## AB外的任意一个<br></code></pre></td></tr></table></figure><h2 id="6-创建计算字段"><a href="#6-创建计算字段" class="headerlink" title="6. 创建计算字段"></a>6. 创建计算字段</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">trim</span>(column1) <span class="hljs-keyword">from</span> table1    ## trim去掉两边空格， ltrim左边，rtrim右边<br><span class="hljs-keyword">select</span> concat(column1, <span class="hljs-string">&#x27;xx&#x27;</span>) <span class="hljs-keyword">as</span> a <span class="hljs-keyword">from</span> table1   ## 拼接，别名<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column1<span class="hljs-operator">*</span>column2 <span class="hljs-keyword">as</span> col <span class="hljs-keyword">from</span> table1<br></code></pre></td></tr></table></figure><h2 id="7-使用函数处理数据"><a href="#7-使用函数处理数据" class="headerlink" title="7. 使用函数处理数据"></a>7. 使用函数处理数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">upper</span>(column1) <span class="hljs-keyword">from</span> table1   ## 大写<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> soundex(column1) <span class="hljs-operator">=</span> soundex(<span class="hljs-string">&#x27;AA&#x27;</span>)   ## 发音类似<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> <span class="hljs-keyword">year</span>(column1) <span class="hljs-operator">=</span> <span class="hljs-number">2021</span><br></code></pre></td></tr></table></figure><h2 id="8-汇总数据"><a href="#8-汇总数据" class="headerlink" title="8. 汇总数据"></a>8. 汇总数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(column1) <span class="hljs-keyword">from</span> table1 ## 平均<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> table1 ## 计数<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(column1) <span class="hljs-keyword">from</span> table1 ## 最大值<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">min</span>(column1) <span class="hljs-keyword">from</span> table1 ## 最小值<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">sum</span>(column1) <span class="hljs-keyword">from</span> table1 ## 总数<br></code></pre></td></tr></table></figure><h2 id="9-分组数据"><a href="#9-分组数据" class="headerlink" title="9. 分组数据"></a>9. 分组数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column1, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> column1<br>## <span class="hljs-keyword">WHERE</span>在数据分组前进行过滤，<span class="hljs-keyword">HAVING</span>在数据分组后进行过滤<br><span class="hljs-keyword">select</span> column1, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-operator">&gt;</span> <span class="hljs-number">4</span> <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> column1 <span class="hljs-keyword">having</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;</span> <span class="hljs-number">2</span><br><span class="hljs-keyword">select</span> column1, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> column1 <span class="hljs-keyword">having</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;</span> <span class="hljs-number">2</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> column1<br></code></pre></td></tr></table></figure><p>顺序：select from where group by having order by</p><h2 id="10-子查询"><a href="#10-子查询" class="headerlink" title="10. 子查询"></a>10. 子查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-keyword">in</span> (<br>    <span class="hljs-keyword">select</span> column2 <span class="hljs-keyword">from</span> table2)<br><span class="hljs-keyword">select</span> column1, (<span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> table2) <span class="hljs-keyword">from</span> table1<br></code></pre></td></tr></table></figure><h2 id="11-联结表"><a href="#11-联结表" class="headerlink" title="11. 联结表"></a>11. 联结表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column1, column2 <span class="hljs-keyword">from</span> table1, table2 <span class="hljs-keyword">where</span> table1.column1 <span class="hljs-operator">=</span> table2.column2<br><span class="hljs-keyword">select</span> column1, column2 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> table2<br></code></pre></td></tr></table></figure><h2 id="12-创建高级联结"><a href="#12-创建高级联结" class="headerlink" title="12. 创建高级联结"></a>12. 创建高级联结</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column1, column2 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">left</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> table2<br><span class="hljs-keyword">select</span> column1, column2 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">right</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> table2<br></code></pre></td></tr></table></figure><h2 id="13-组合查询"><a href="#13-组合查询" class="headerlink" title="13. 组合查询"></a>13. 组合查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> column2 <span class="hljs-keyword">from</span> table2<br><span class="hljs-keyword">select</span> column1 <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">select</span> column2 <span class="hljs-keyword">from</span> table2<br></code></pre></td></tr></table></figure><h2 id="14-插入数据"><a href="#14-插入数据" class="headerlink" title="14. 插入数据"></a>14. 插入数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> table1 <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;xx&#x27;</span>)<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> table1(column1) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;xx&#x27;</span>)<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> table1(column1) <span class="hljs-keyword">select</span> column2 <span class="hljs-keyword">from</span> table2<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">into</span> table2 <span class="hljs-keyword">from</span> table1<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> table2 <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> table1<br></code></pre></td></tr></table></figure><h2 id="15-更新和删除数据"><a href="#15-更新和删除数据" class="headerlink" title="15. 更新和删除数据"></a>15. 更新和删除数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> table1 <span class="hljs-keyword">set</span> column1 <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;xx&#x27;</span> <span class="hljs-keyword">where</span> column2 <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;aa&#x27;</span><br><span class="hljs-keyword">update</span> <span class="hljs-keyword">from</span> table1 <span class="hljs-keyword">where</span> column1 <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;xx&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="16-创建和操纵表"><a href="#16-创建和操纵表" class="headerlink" title="16. 创建和操纵表"></a>16. 创建和操纵表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> table1(column1 <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;a&#x27;</span>)<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> table1 <span class="hljs-keyword">add</span> column2 <span class="hljs-type">char</span>(<span class="hljs-number">20</span>)<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> table1 <span class="hljs-keyword">drop</span> <span class="hljs-keyword">column</span> column2<br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> table1<br></code></pre></td></tr></table></figure><h2 id="17-使用视图"><a href="#17-使用视图" class="headerlink" title="17. 使用视图"></a>17. 使用视图</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> view1 <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> table1<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> view1<br></code></pre></td></tr></table></figure><h2 id="18-使用存储结构"><a href="#18-使用存储结构" class="headerlink" title="18. 使用存储结构"></a>18. 使用存储结构</h2><p>==暂时不整理==</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">execute</span> name1(<span class="hljs-string">&#x27;xx&#x27;</span>,<span class="hljs-string">&#x27;aa&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="19-管理事务处理"><a href="#19-管理事务处理" class="headerlink" title="19. 管理事务处理"></a>19. 管理事务处理</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">start</span> transaction<br><span class="hljs-keyword">commit</span><br><span class="hljs-keyword">rollback</span><br><span class="hljs-keyword">savepoint</span> delete1<br><span class="hljs-keyword">rollback</span> transaction delete1<br></code></pre></td></tr></table></figure><h2 id="20-使用游标"><a href="#20-使用游标" class="headerlink" title="20. 使用游标"></a>20. 使用游标</h2><p>==暂时不整理==</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">declare</span> custcursor <span class="hljs-keyword">cursor</span> fro <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> table1<br><span class="hljs-keyword">open</span> <span class="hljs-keyword">cursor</span> custcursor<br></code></pre></td></tr></table></figure><h2 id="21-高级SQL特性"><a href="#21-高级SQL特性" class="headerlink" title="21. 高级SQL特性"></a>21. 高级SQL特性</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> table1 <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span> <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span>(column1)<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Orders(cust_id <span class="hljs-type">CHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">REFERENCES</span> Customers(cust_id));<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Orders <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (cust_id) <span class="hljs-keyword">REFERENCES</span> Customers (cust_id)<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> OrderItems(quantity <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">CHECK</span> (quantity <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>));<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-keyword">CHECK</span> (gender <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;[MF]&#x27;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> INDEX prod_name_ind <span class="hljs-keyword">ON</span> Products (prod_name);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据库</tag>
      
      <tag>必知必会</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据库刷题</title>
    <link href="/2022/04/18/%E6%95%B0%E6%8D%AE%E5%BA%93-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%B7%E9%A2%98/"/>
    <url>/2022/04/18/%E6%95%B0%E6%8D%AE%E5%BA%93-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%B7%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="数据库刷题"><a href="#数据库刷题" class="headerlink" title="数据库刷题"></a>数据库刷题</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> employees<br><span class="hljs-keyword">WHERE</span> hire_date <span class="hljs-operator">=</span> (<br>    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> hire_date<br>    <span class="hljs-keyword">FROM</span> employees<br>    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> hire_date <span class="hljs-keyword">DESC</span>       <span class="hljs-comment">-- 倒序</span><br>    LIMIT <span class="hljs-number">1</span> <span class="hljs-keyword">OFFSET</span> <span class="hljs-number">2</span>              <span class="hljs-comment">-- 去掉排名倒数第一第二的时间，取倒数第三</span><br>);<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> actor <span class="hljs-keyword">values</span><br>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;PENELOPE&#x27;</span>, <span class="hljs-string">&#x27;GUINESS&#x27;</span>, <span class="hljs-string">&#x27;2006-02-15 12:34:33&#x27;</span>),<br>(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;NICK&#x27;</span>, <span class="hljs-string">&#x27;WAHLBERG&#x27;</span>, <span class="hljs-string">&#x27;2006-02-15 12:34:33&#x27;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> titles_test<br><span class="hljs-keyword">SET</span> emp_no <span class="hljs-operator">=</span> REPLACE(emp_no, <span class="hljs-number">10001</span>, <span class="hljs-number">10005</span>)<br><span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> titles_test rename <span class="hljs-keyword">to</span> titles_2017<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">round(xx, <span class="hljs-number">2</span>)  ## 保留<span class="hljs-number">2</span>位小数<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">where</span> id <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span>  ## 查询空置<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据库</tag>
      
      <tag>刷题</tag>
      
      <tag>mysql</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenGauss</title>
    <link href="/2022/04/18/%E6%95%B0%E6%8D%AE%E5%BA%93-openGauss/"/>
    <url>/2022/04/18/%E6%95%B0%E6%8D%AE%E5%BA%93-openGauss/</url>
    
    <content type="html"><![CDATA[<h1 id="数据库实验报告"><a href="#数据库实验报告" class="headerlink" title="数据库实验报告"></a>数据库实验报告</h1><p><strong>实验时间：2022年4月3日</strong></p><h2 id="1-环境搭建"><a href="#1-环境搭建" class="headerlink" title="1. 环境搭建"></a>1. 环境搭建</h2><h3 id="1-1-实验介绍"><a href="#1-1-实验介绍" class="headerlink" title="1.1 实验介绍"></a>1.1 实验介绍</h3><ol><li><p>关于本实验：</p><p>本实验通过在华为云上购买弹性云服务器ECS，了解弹性云服务器ECS配置流程，掌握弹性云服务器ECS的连接和操作。</p></li><li><p>实验目的：</p><ol><li>掌握ECS弹性云服务器购买流程；</li><li>掌握ECS弹性云服务器配置参数。</li></ol></li></ol><h3 id="1-2-准备私有云VPC环境"><a href="#1-2-准备私有云VPC环境" class="headerlink" title="1.2 准备私有云VPC环境"></a>1.2 准备私有云VPC环境</h3><ol><li><p>登录华为云账号，在虚拟私有云VPC页面下，点击“访问控制台”。<a href="https://www.huaweicloud.com/product/vpc.html">地址</a></p></li><li><p>在网络控制台界面中，点击“创建虚拟私有云”并填写如下配置信息，然后点击“立即创建”。</p><p><img src="\img\opengauss\image-20220403131714925.png" alt="image-20220403131714925"></p></li><li><p>返回到网络控制台，可看见VPC与子网已创建。</p><p><img src="\img\opengauss\image-20220403131831373.png" alt="image-20220403131831373"></p></li><li><p>在“安全组”页面中找到default安全组。点击“配置规则”。选择“入方向规则”页签，点击“添加规则”。协议端口选择“全部放通”，点击“确定”，完成安全组规则的添加。</p><p><img src="\img\opengauss\image-20220403132221626.png" alt="image-20220403132221626"></p></li></ol><h3 id="1-3-购买云服务器ECS并登录"><a href="#1-3-购买云服务器ECS并登录" class="headerlink" title="1.3 购买云服务器ECS并登录"></a>1.3 购买云服务器ECS并登录</h3><ol><li><p>登录华为云账号，在<a href="https://www.huaweicloud.com/product/ecs.html">弹性云服务器ECS页面</a>下，点击“立即购买”。填写如下基础配置信息:</p><p><img src="\img\opengauss\image-20220403132835303.png" alt="image-20220403132835303"></p><p><img src="\img\opengauss\image-20220403132858192.png" alt="image-20220403132858192"></p><p>网络配置信息：</p><p><img src="\img\opengauss\image-20220403133042945.png" alt="image-20220403133042945"></p><p><img src="\img\opengauss\image-20220403133110950.png" alt="image-20220403133110950"></p><p>高级配置信息:</p><p><img src="\img\opengauss\image-20220403133445538.png" alt="image-20220403133445538"></p></li><li><p>购买完成后，在云服务器控制台可以看到正常运行中的ECS，记录弹性IP地址。</p><p><img src="\img\opengauss\image-20220403133633920.png" alt="image-20220403133633920"></p></li><li><p>使用Xshell 7教育版连接服务器，连接结果如下图所示</p><p><img src="\img\opengauss\image-20220403133833247.png" alt="image-20220403133833247"></p></li></ol><h2 id="2-openGauss数据安装及基本操作"><a href="#2-openGauss数据安装及基本操作" class="headerlink" title="2. openGauss数据安装及基本操作"></a>2. openGauss数据安装及基本操作</h2><h3 id="2-1-实验介绍"><a href="#2-1-实验介绍" class="headerlink" title="2.1 实验介绍"></a>2.1 实验介绍</h3><ol><li><p>关于本实验：</p><p>本实验通过第三方工具，完成openGauss的编译安装。</p></li><li><p>实验目的：</p><ol><li>掌握第三方工具库编译；</li><li>掌握openGauss编译安装。</li></ol></li></ol><h3 id="2-2-编译前准备"><a href="#2-2-编译前准备" class="headerlink" title="2.2 编译前准备"></a>2.2 编译前准备</h3><ol><li><p>创建openGauss数据库的安装用户jwx及其属组dbgrp。</p><p><img src="\img\opengauss\image-20220403134040490.png" alt="image-20220403134040490"></p></li><li><p>修改jwx用户密码。</p><p><img src="\img\opengauss\image-20220403134147451.png" alt="image-20220403134147451"></p></li><li><p>创建openGauss源码存放及openGauss安装路径。</p><p><img src="\img\opengauss\image-20220403134234578.png" alt="image-20220403134234578"></p></li><li><p>下载第三方编译库。</p><p><img src="\img\opengauss\image-20220403134641453.png" alt="image-20220403134641453"></p></li><li><p>解压下载好的第三方编译库，并重命名为binarylibs。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -zxvf openGauss-third_party_binarylibs.tar.gz<br>mv openGauss-third_party_binarylibs/ binarylibs/<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403134917820.png" alt="image-20220403134917820"></p></li><li><p>下载openGauss源码。</p><p><img src="\img\opengauss\image-20220403135116679.png" alt="image-20220403135116679"></p></li><li><p>上传cmake包。</p><p>使用Xftp将<a href="https://github.com/Kitware/CMake/releases/download/v3.20.0/cmake-3.20.0-linux-aarch64.tar.gz">cmake-3.20.0-linux-aarch64.tar.gz</a>包上传至服务器/usr/local/src/下：</p><p><img src="\img\opengauss\image-20220403135324548.png" alt="image-20220403135324548"></p><p>然后进行解压</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /usr/local/src/<br>tar -zxvf cmake-3.20.0-linux-aarch64.tar.gz<br>chmod 755 /usr/local/src/cmake-3.20.0-linux-aarch64/<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403135418497.png" alt="image-20220403135418497"></p></li><li><p>使用yum安装依赖包。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum install -y libaio-devel ncurses-devel pam-devel libffi-devel libtool libtool-devel libtool-ltdl openssl-devel bison golang flex dkms-2.6.1-5.oe1.noarch python3-devel patch<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403135507400.png" alt="image-20220403135507400"></p></li><li><p>替换python版本。</p><p>将python3的链接设置为python的。</p><p><img src="\img\opengauss\image-20220403135608122.png" alt="image-20220403135608122"></p></li><li><p>修改/opt/software路径的用户所属组及权限。</p><p><img src="\img\opengauss\image-20220403135717325.png" alt="image-20220403135717325"></p></li></ol><h3 id="2-3-数据库安装编译"><a href="#2-3-数据库安装编译" class="headerlink" title="2.3 数据库安装编译"></a>2.3 数据库安装编译</h3><ol><li><p>切换jwx用户并设定jwx用户的环境变量。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">su - jwx<br>vim ~/.bash_profile<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403140049115.png" alt="image-20220403140049115"></p><p>使环境变量生效。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">source ~/.bash_profile<br></code></pre></td></tr></table></figure></li><li><p>进入openGauss源码下，生成配置文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /opt/software/openGauss-server/<br>./configure --gcc-version=7.3.0 --prefix=$GAUSSHOME CFLAGS=&quot;-O0&quot; --enable-debug --without-readline --without-zlib --enable-cassert --enable-thread-safety CC=g++ --3rd=$BINARY_PATH --with-python<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403140227053.png" alt="image-20220403140227053"></p></li><li><p>执行make命令进行编译。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make -j8<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403140654199.png" alt="image-20220403140654199"></p></li><li><p>执行make install安装。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make install<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403140935026.png" alt="image-20220403140935026"></p></li><li><p>初始化数据库。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gs_initdb -D $PGDATA --nodename=jwxsql --locale=&quot;en_US.UTF-8&quot; -Atrust -w &#x27;Nju+2022&#x27;<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403141134603.png" alt="image-20220403141134603"></p></li><li><p>启动数据库。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">gs_ctl start -D /opt/software/openGauss/data -Z single_node -l logfile<br>ps -ef|grep jwx# 查看数据库是否启动成功。<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403141247688.png" alt="image-20220403141247688"></p></li><li><p>数据库登录。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gsql -d postgres -p 5432 -r<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403141339397.png" alt="image-20220403141339397"></p></li><li><p>查询数据库版本。</p><p><img src="\img\opengauss\image-20220403141425067.png" alt="image-20220403141425067"></p></li><li><p>退出数据库。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">postgres<span class="hljs-operator">=</span># \q<br></code></pre></td></tr></table></figure><h3 id="2-4-关卡验证"><a href="#2-4-关卡验证" class="headerlink" title="2.4 关卡验证"></a>2.4 关卡验证</h3></li><li><p>对数据库状态进行验证。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gs_ctl status<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403141531889.png" alt="image-20220403141531889"></p></li><li><p>对数据库进程进行截图验证，包含数据库服务器的主机名。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ps -ef|grep jwx<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403141614716.png" alt="image-20220403141614716"></p></li><li><p>简单描述关卡一中，安装数据库所需要的步骤。完成以上信息，表明关卡一完成。</p><ol><li>下载第三方编译库</li><li>下载openGauss源码</li><li>下载相关依赖包并配置环境</li><li>对openGauss源码编译安装</li></ol></li></ol><h2 id="3-openGauss的原生DB4AI引擎"><a href="#3-openGauss的原生DB4AI引擎" class="headerlink" title="3. openGauss的原生DB4AI引擎"></a>3. openGauss的原生DB4AI引擎</h2><h3 id="3-1-实验介绍"><a href="#3-1-实验介绍" class="headerlink" title="3.1 实验介绍"></a>3.1 实验介绍</h3><ol><li><p>关于本实验：</p><p>本实验关卡，在安装完成的openGauss数据库上，使用DB4AI的功能，利用openGauss的DB4AI性能进行房价的预测。</p></li><li><p>实验目的：</p><ol><li>掌握openGauss数据库的DB4AI的功能。</li></ol></li></ol><h3 id="3-2-利用DB4AI原生AI引擎训练并预测模型"><a href="#3-2-利用DB4AI原生AI引擎训练并预测模型" class="headerlink" title="3.2 利用DB4AI原生AI引擎训练并预测模型"></a>3.2 利用DB4AI原生AI引擎训练并预测模型</h3><ol><li><p>在数据库中创建一张表，用于数据的训练与预测。</p><p>在jwx用户环境下，登录数据库。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gsql -d postgres -p 5432 -r<br></code></pre></td></tr></table></figure><p>创建表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sql">postgres<span class="hljs-operator">=</span># <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> houses;<br>postgres<span class="hljs-operator">=</span># <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> houses (id <span class="hljs-type">INT</span>, tax <span class="hljs-type">INT</span>, bedroom <span class="hljs-type">INT</span>, bath <span class="hljs-type">FLOAT</span>, price <span class="hljs-type">INT</span>,  size <span class="hljs-type">INT</span>, lot <span class="hljs-type">INT</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> houses <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-number">1</span> ,  <span class="hljs-number">590</span> ,       <span class="hljs-number">2</span> ,    <span class="hljs-number">1</span> ,  <span class="hljs-number">50000</span> ,  <span class="hljs-number">770</span> , <span class="hljs-number">22100</span>),<br>(<span class="hljs-number">2</span> , <span class="hljs-number">1050</span> ,       <span class="hljs-number">3</span> ,    <span class="hljs-number">2</span> ,  <span class="hljs-number">85000</span> , <span class="hljs-number">1410</span> , <span class="hljs-number">12000</span>),<br>(<span class="hljs-number">3</span> ,   <span class="hljs-number">20</span> ,       <span class="hljs-number">3</span> ,    <span class="hljs-number">1</span> ,  <span class="hljs-number">22500</span> , <span class="hljs-number">1060</span> ,  <span class="hljs-number">3500</span>),<br>(<span class="hljs-number">4</span> ,  <span class="hljs-number">870</span> ,       <span class="hljs-number">2</span> ,    <span class="hljs-number">2</span> ,  <span class="hljs-number">90000</span> , <span class="hljs-number">1300</span> , <span class="hljs-number">17500</span>),<br>(<span class="hljs-number">5</span> , <span class="hljs-number">1320</span> ,       <span class="hljs-number">3</span> ,    <span class="hljs-number">2</span> , <span class="hljs-number">133000</span> , <span class="hljs-number">1500</span> , <span class="hljs-number">30000</span>),<br>(<span class="hljs-number">6</span> , <span class="hljs-number">1350</span> ,       <span class="hljs-number">2</span> ,    <span class="hljs-number">1</span> ,  <span class="hljs-number">90500</span> ,  <span class="hljs-number">820</span> , <span class="hljs-number">25700</span>),<br>(<span class="hljs-number">7</span> , <span class="hljs-number">2790</span> ,       <span class="hljs-number">3</span> ,  <span class="hljs-number">2.5</span> , <span class="hljs-number">260000</span> , <span class="hljs-number">2130</span> , <span class="hljs-number">25000</span>),<br>(<span class="hljs-number">8</span> ,  <span class="hljs-number">680</span> ,       <span class="hljs-number">2</span> ,    <span class="hljs-number">1</span> , <span class="hljs-number">142500</span> , <span class="hljs-number">1170</span> , <span class="hljs-number">22000</span>),<br>(<span class="hljs-number">9</span> , <span class="hljs-number">1840</span> ,       <span class="hljs-number">3</span> ,    <span class="hljs-number">2</span> , <span class="hljs-number">160000</span> , <span class="hljs-number">1500</span> , <span class="hljs-number">19000</span>),<br>(<span class="hljs-number">10</span> , <span class="hljs-number">3680</span> ,       <span class="hljs-number">4</span> ,    <span class="hljs-number">2</span> , <span class="hljs-number">240000</span> , <span class="hljs-number">2790</span> , <span class="hljs-number">20000</span>),<br>(<span class="hljs-number">11</span> , <span class="hljs-number">1660</span> ,       <span class="hljs-number">3</span> ,    <span class="hljs-number">1</span> ,  <span class="hljs-number">87000</span> , <span class="hljs-number">1030</span> , <span class="hljs-number">17500</span>),<br>(<span class="hljs-number">12</span> , <span class="hljs-number">1620</span> ,       <span class="hljs-number">3</span> ,    <span class="hljs-number">2</span> , <span class="hljs-number">118600</span> , <span class="hljs-number">1250</span> , <span class="hljs-number">20000</span>),<br>(<span class="hljs-number">13</span> , <span class="hljs-number">3100</span> ,       <span class="hljs-number">3</span> ,    <span class="hljs-number">2</span> , <span class="hljs-number">140000</span> , <span class="hljs-number">1760</span> , <span class="hljs-number">38000</span>),<br>(<span class="hljs-number">14</span> , <span class="hljs-number">2070</span> ,       <span class="hljs-number">2</span> ,    <span class="hljs-number">3</span> , <span class="hljs-number">148000</span> , <span class="hljs-number">1550</span> , <span class="hljs-number">14000</span>),<br>(<span class="hljs-number">15</span> ,  <span class="hljs-number">650</span> ,       <span class="hljs-number">3</span> ,  <span class="hljs-number">1.5</span> ,  <span class="hljs-number">65000</span> , <span class="hljs-number">1450</span> , <span class="hljs-number">12000</span>);<br></code></pre></td></tr></table></figure></li><li><p>通过 \d 命令观察新创建的表 house 结构。</p><p><img src="\img\opengauss\image-20220403141906793.png" alt="image-20220403141906793"></p></li><li><p>通过CREATE MODEL语句，基于SVM算法创建一个二分类模型。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">postgres<span class="hljs-operator">=</span># <span class="hljs-keyword">CREATE</span> MODEL house_binary_classifier <span class="hljs-keyword">USING</span> svm_classification FEATURES tax, bath, size TARGET price <span class="hljs-operator">&lt;</span> <span class="hljs-number">100000</span> <span class="hljs-keyword">FROM</span> houses;<br></code></pre></td></tr></table></figure><p>执行CREATE MODEL 语句后，会开启模型的训练，并输出训练过程中使用的超参数信息：</p><p><img src="\img\opengauss\image-20220403141958289.png" alt="image-20220403141958289"></p></li><li><p>在gs_model_warehouse系统表中查看训练后的模型信息</p><p><img src="\img\opengauss\image-20220403142054175.png" alt="image-20220403142054175"></p><p>通过系统表的返回信息可以看到训练过程的预测准确率为 0.666667。</p><p>这对于二分类来说准确率并不高，我们后面将尝试通过超参数来提升模型表现。</p></li><li><p>使用 <code>DROP MODEL</code>语句删除模型。</p><p><img src="\img\opengauss\image-20220403142132930.png" alt="image-20220403142132930"></p></li><li><p>使用更优的超参数提高SVM算法的训练表现。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">postgres<span class="hljs-operator">=</span># <span class="hljs-keyword">CREATE</span> MODEL house_binary_classifier <span class="hljs-keyword">USING</span> svm_classification FEATURES tax, bath, size TARGET price <span class="hljs-operator">&lt;</span> <span class="hljs-number">100000</span> <span class="hljs-keyword">FROM</span> houses <span class="hljs-keyword">WITH</span> batch_size<span class="hljs-operator">=</span><span class="hljs-number">1</span>, learning_rate<span class="hljs-operator">=</span><span class="hljs-number">0.001</span>;<br></code></pre></td></tr></table></figure><p>在该步骤中，修改训练时的学习率（learning_rate）为0.001，批大小（batch_size）设置为1。</p><p><img src="\img\opengauss\image-20220403142206082.png" alt="image-20220403142206082"></p></li><li><p>观察新模型的信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">postgres<span class="hljs-operator">=</span># <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> gs_model_warehouse <span class="hljs-keyword">WHERE</span> modelname <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;house_binary_classifier&#x27;</span>;<br></code></pre></td></tr></table></figure><p>在返回信息中，我们可以看到新模型的表现：</p><p><img src="\img\opengauss\image-20220403142306963.png" alt="image-20220403142306963"></p></li><li><p>使用<code>PREDICT BY</code>语句预测样本数据。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">postgres<span class="hljs-operator">=</span># <span class="hljs-keyword">SELECT</span> tax, bath, size, price, price <span class="hljs-operator">&lt;</span> <span class="hljs-number">100000</span> <span class="hljs-keyword">AS</span> price_actual, PREDICT <span class="hljs-keyword">BY</span> house_binary_classifier (FEATURES tax, bath, size) <span class="hljs-keyword">AS</span> price_pred <span class="hljs-keyword">FROM</span> houses;<br></code></pre></td></tr></table></figure><p>返回结果为：</p><p><img src="\img\opengauss\image-20220403142341489.png" alt="image-20220403142341489"></p><p>Price_pred 列的输出结果即为预测结果，price_actual 列的结果为真实值。</p></li><li><p>通过 CREATE MODEL 语句创建一个逻辑回归（logistic regression）模型。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">postgres<span class="hljs-operator">=</span># <span class="hljs-keyword">CREATE</span> MODEL house_logistic_classifier <span class="hljs-keyword">USING</span> logistic_regression FEATURES tax, bath, size target price <span class="hljs-operator">&lt;</span> <span class="hljs-number">100000</span> <span class="hljs-keyword">FROM</span> houses <span class="hljs-keyword">WITH</span> learning_rate<span class="hljs-operator">=</span><span class="hljs-number">0.001</span>;<br></code></pre></td></tr></table></figure><p><img src="\img\opengauss\image-20220403142406972.png" alt="image-20220403142406972"></p></li><li><p>利用训练好的逻辑回归模型预测数据，并与SVM算法进行比较。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">postgres<span class="hljs-operator">=</span># <span class="hljs-keyword">SELECT</span> tax, bath, size, price, price <span class="hljs-operator">&lt;</span> <span class="hljs-number">100000</span> <span class="hljs-keyword">AS</span> price_actual, PREDICT <span class="hljs-keyword">BY</span> house_binary_classifier (FEATURES tax, bath, size) <span class="hljs-keyword">AS</span> price_svm_pred, PREDICT <span class="hljs-keyword">BY</span> house_logistic_classifier (FEATURES tax, bath, size) <span class="hljs-keyword">AS</span> price_logistic_pred <span class="hljs-keyword">FROM</span> houses;<br></code></pre></td></tr></table></figure><p>输出结果如下：</p><p><img src="\img\opengauss\image-20220403142433653.png" alt="image-20220403142433653"></p></li></ol><h3 id="3-3-关卡验证"><a href="#3-3-关卡验证" class="headerlink" title="3.3 关卡验证"></a>3.3 关卡验证</h3><ol><li><p>SVM算法训练后的模型信息及预测：</p><p><img src="\img\opengauss\image-20220403142306963.png" alt="image-20220403142306963"></p><p><img src="\img\opengauss\image-20220403142341489.png" alt="image-20220403142341489"></p></li><li><p>逻辑回归模型预测数据结果</p><p><img src="\img\opengauss\image-20220403142433653.png" alt="image-20220403142433653"></p></li></ol><h2 id="4-创建镜像和释放资源"><a href="#4-创建镜像和释放资源" class="headerlink" title="4. 创建镜像和释放资源"></a>4. 创建镜像和释放资源</h2><h3 id="4-1-实验介绍"><a href="#4-1-实验介绍" class="headerlink" title="4.1 实验介绍"></a>4.1 实验介绍</h3><ol><li><p>关于本实验：</p><p>本实验通过在华为云上删除弹性云服务器ECS实例，帮助学员和读者掌握在华为云上清除弹性云服务器ECS资源。此外，本实验通过镜像保存操作。</p></li><li><p>实验目的：</p><ol><li>掌握弹性云服务器资源释放操作；</li><li>熟悉华为云操作。</li></ol></li></ol><h3 id="4-2-创建镜像"><a href="#4-2-创建镜像" class="headerlink" title="4.2 创建镜像"></a>4.2 创建镜像</h3><ol><li><p>创建镜像，选择系统盘镜像</p><p><img src="\img\opengauss\image-20220403143216852.png" alt="image-20220403143216852"></p></li><li><p>查看列表，发现镜像创建成功</p><p><img src="\img\opengauss\image-20220403143943395.png" alt="image-20220403143943395"></p></li></ol><h3 id="4-3-删除的云服务器"><a href="#4-3-删除的云服务器" class="headerlink" title="4.3 删除的云服务器"></a>4.3 删除的云服务器</h3><ol><li><p>打开云服务器控制台，在需要删除的云服务器后面选择“更多&gt;删除”。</p><p><img src="\img\opengauss\image-20220403144025674.png" alt="image-20220403144025674"></p></li><li><p>在弹出对话框中勾选“释放云服务器绑定的弹性公网IP地址”和“删除云服务器挂载的数据盘”，然后点击“是”。</p><p><img src="\img\opengauss\image-20220403144100847.png" alt="image-20220403144100847"></p></li><li><p>查看到列表中已没有资源时，表示弹性云服务器已删除。</p><p><img src="\img\opengauss\image-20220403144229069.png" alt="image-20220403144229069"></p></li></ol>]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据库</tag>
      
      <tag>OpenGauss</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>刷题小知识</title>
    <link href="/2022/04/08/%E7%AE%97%E6%B3%95-%E5%88%B7%E9%A2%98%E5%B0%8F%E7%9F%A5%E8%AF%86/"/>
    <url>/2022/04/08/%E7%AE%97%E6%B3%95-%E5%88%B7%E9%A2%98%E5%B0%8F%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<h1 id="刷题小知识"><a href="#刷题小知识" class="headerlink" title="刷题小知识"></a>刷题小知识</h1><ol><li>C++ 输入一行未知个数的整数 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">while</span>(<span class="hljs-built_in">cin</span>&gt;&gt;temp)&#123;<br>    datas.push_back(temp);<br>    <span class="hljs-keyword">char</span> c = getchar();<br>    <span class="hljs-keyword">if</span>(c == <span class="hljs-string">&#x27;\n&#x27;</span>)   <span class="hljs-keyword">break</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>算法</tag>
      
      <tag>c++</tag>
      
      <tag>刷题</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>论文_K-BERT</title>
    <link href="/2021/02/11/%E8%AE%BA%E6%96%87-K-BERT/"/>
    <url>/2021/02/11/%E8%AE%BA%E6%96%87-K-BERT/</url>
    
    <content type="html"><![CDATA[<h1 id="K-BERT"><a href="#K-BERT" class="headerlink" title="K-BERT"></a>K-BERT</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>BERT+KGs(知识图谱)</p><h3 id="挑战"><a href="#挑战" class="headerlink" title="挑战"></a>挑战</h3><ol><li>异构嵌入空间(HES)</li><li>知识噪声(KN)</li></ol><h3 id="贡献"><a href="#贡献" class="headerlink" title="贡献"></a>贡献</h3><ol><li>提出了一种知识驱动的LR模型，即K-BERT，该模型与BERT兼容，可以将领域知识纳入其中，而不存在HES和KN问题。</li><li>K-BERT不仅在特定领域的任务上，而且在开放领域的大量任务上都明显优于BERT。</li></ol><h2 id="K-BERT-1"><a href="#K-BERT-1" class="headerlink" title="K-BERT"></a>K-BERT</h2><h3 id="符号"><a href="#符号" class="headerlink" title="符号"></a>符号</h3><ol><li>$s = {w_0, w_1, … , w_n}$ 表示为一个句子符记序列</li><li>$\varepsilon = {w_i, r_j, w_k}$ 表示三元组</li></ol><h3 id="模型框架"><a href="#模型框架" class="headerlink" title="模型框架"></a>模型框架</h3><p><img src="/img/%E8%AE%BA%E6%96%87_K-BERT.assets/image-20210211092849328.png" alt="模型框架"></p><h3 id="知识层"><a href="#知识层" class="headerlink" title="知识层"></a>知识层</h3><ol><li>查询</li><li>注入</li></ol><p><img src="/img/%E8%AE%BA%E6%96%87_K-BERT.assets/image-20210211093054926.png" alt="句子树"></p><p><img src="/img/%E8%AE%BA%E6%96%87_K-BERT.assets/image-20210211092941643.png" alt="嵌入层"></p><h3 id="嵌入层"><a href="#嵌入层" class="headerlink" title="嵌入层"></a>嵌入层</h3><ol><li><p>标识</p><p>重排句子，加上分类标签</p></li><li><p>软定位</p><p>避免陷入词袋模型</p></li><li><p>段嵌入</p><p>用于多个句子时</p></li></ol><h3 id="可视层"><a href="#可视层" class="headerlink" title="可视层"></a>可视层</h3><p>K-BERT的使用可见矩阵M来限制每个标识的可见区域</p><h3 id="Mask-Transformer"><a href="#Mask-Transformer" class="headerlink" title="Mask-Transformer"></a>Mask-Transformer</h3><p>根据可视矩阵M限制自注意力区域</p><p><img src="/img/%E8%AE%BA%E6%96%87_K-BERT.assets/image-20210211094628427.png" alt="Mask-Transformer"></p>]]></content>
    
    
    <categories>
      
      <category>论文</category>
      
    </categories>
    
    
    <tags>
      
      <tag>论文</tag>
      
      <tag>词向量</tag>
      
      <tag>深度学习</tag>
      
      <tag>自然语言处理</tag>
      
      <tag>BERT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>内录的同时录制麦克风的声音</title>
    <link href="/2021/02/01/%E5%B7%A5%E5%85%B7-%E5%86%85%E5%BD%95%E7%9A%84%E5%90%8C%E6%97%B6%E5%BD%95%E5%88%B6%E9%BA%A6%E5%85%8B%E9%A3%8E%E7%9A%84%E5%A3%B0%E9%9F%B3/"/>
    <url>/2021/02/01/%E5%B7%A5%E5%85%B7-%E5%86%85%E5%BD%95%E7%9A%84%E5%90%8C%E6%97%B6%E5%BD%95%E5%88%B6%E9%BA%A6%E5%85%8B%E9%A3%8E%E7%9A%84%E5%A3%B0%E9%9F%B3/</url>
    
    <content type="html"><![CDATA[<h1 id="内录的同时录制麦克风的声音"><a href="#内录的同时录制麦克风的声音" class="headerlink" title="内录的同时录制麦克风的声音"></a>内录的同时录制麦克风的声音</h1><h2 id="参考文件"><a href="#参考文件" class="headerlink" title="参考文件"></a>参考文件</h2><p><a href="https://jingyan.baidu.com/article/11c17a2c6e347bf446e39d3e.html">内录的同时录制麦克风的声音</a></p><h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><p><img src="/img/内录的同时录制麦克风的声音/1.png" alt="图片1"><br><img src="/img/内录的同时录制麦克风的声音/2.png" alt="图片2"><br><img src="/img/内录的同时录制麦克风的声音/3.png" alt="图片3"></p>]]></content>
    
    
    <categories>
      
      <category>奇怪的知识</category>
      
    </categories>
    
    
    <tags>
      
      <tag>奇怪的知识</tag>
      
      <tag>电脑软件</tag>
      
      <tag>声音</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>常用网站</title>
    <link href="/2021/02/01/%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99/"/>
    <url>/2021/02/01/%E5%B8%B8%E7%94%A8%E7%BD%91%E7%AB%99/</url>
    
    <content type="html"><![CDATA[<h1 id="常用的网站"><a href="#常用的网站" class="headerlink" title="常用的网站"></a>常用的网站</h1><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul><li><a href="https://wwr.lanzoui.com/b02idiskf">蓝奏云</a></li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><ul><li><a href="https://github.com/">GitHub</a></li><li><a href="https://paste.ubuntu.com/">Pastebin</a></li></ul><h2 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h2><ul><li><a href="https://dsa.cs.tsinghua.edu.cn/oj/index.shtml">Tsinghua</a></li><li><a href="http://lx.lanqiao.cn/index.page">蓝桥杯</a></li><li><a href="https://vjudge.net/">Vjudge</a></li><li><a href="https://leetcode-cn.com/">Leetcode-cn</a></li><li><a href="https://leetcode.com/explore/">Leetcode</a></li><li><a href="https://visualgo.net/zh">算法可视化</a></li></ul><h2 id="论文"><a href="#论文" class="headerlink" title="论文"></a>论文</h2><ul><li><a href="http://wenxian.aazz.cn/">文献格式生成器</a></li><li><a href="https://www.arxivdaily.com/">arxivdaily</a></li></ul><h2 id="办公"><a href="#办公" class="headerlink" title="办公"></a>办公</h2><ul><li><a href="https://flourish.studio/">画图</a></li><li><a href="https://www.iconfont.cn/collections/detail?spm=a313x.7781069.1998910419.de12df413&amp;cid=12507">矢量图</a></li><li><a href="https://tushuo.baidu.com/wave/index#/gallery">图说</a></li><li><a href="https://colorhunt.co/trendy">颜色组合</a></li><li><a href="https://www.remove.bg/zh">背景去除</a></li><li><a href="https://www.autodraw.com/">AutoDraw</a></li><li><a href="https://www.pexels.com/videos/">免费视频</a></li><li><a href="https://pixabay.com/">免费图片</a></li><li><a href="http://alexlenail.me/NN-SVG/index.html">神经网络</a></li><li><a href="https://processon.com/login?backUrl=/diagraming/5f7ffdd77d9c0806f268cb9b">ProcessOn</a></li><li><a href="https://docs.qq.com/doc/DZHlQZVhHb1ZVaXBM?ADUIN=3075783316&amp;ADSESSION=1582246933&amp;ADTAG=CLIENT.QQ.5689_.0&amp;ADPUBNO=26978&amp;jumpuin=3075783316">素材</a></li></ul><h2 id="邮箱和上网"><a href="#邮箱和上网" class="headerlink" title="邮箱和上网"></a>邮箱和上网</h2><ul><li><a href="https://protonmail.com/">ProtonMail</a></li><li><a href="https://outlook.live.com/mail/0/inbox">outlook</a></li><li><a href="https://email.163.com/">网易云</a></li><li><a href="https://mail.yahoo.com/">雅虎</a></li><li><a href="https://www.dropbox.com/">Dropbox</a></li><li><a href="https://www.jianguoyun.com/d/home#/safety">坚果云</a></li><li><a href="https://my.vultr.com/">Vultr</a></li><li><a href="https://www.aliyun.com/">阿里云</a></li><li><a href="https://paoluz.link/user">跑路云</a></li><li><a href="https://www.lifezk.cn/">泡泡云</a></li><li><a href="https://mvnrepository.com/">Maven</a></li><li><a href="https://icedrive.net/">icedrive</a></li></ul><h2 id="电脑软件"><a href="#电脑软件" class="headerlink" title="电脑软件"></a>电脑软件</h2><ul><li><a href="https://pan.baidu.com/">百度网盘</a></li><li><a href="https://152.136.227.230:230/">网盘会员</a></li><li><a href="https://www.freetrial.store/">奈飞合租</a></li><li><a href="https://www.toolnb.com/">在线小工具</a></li><li><a href="http://192.168.0.1/">路由器</a></li><li><a href="http://192.168.51.1/Login.html">摩路由</a></li></ul><h2 id="隐私"><a href="#隐私" class="headerlink" title="隐私"></a>隐私</h2><ul><li><a href="https://hujiao24.com/tariff">举报</a></li><li><a href="https://www.reg007.com/account/profile">注册查看</a></li></ul><h2 id="NLP"><a href="#NLP" class="headerlink" title="NLP"></a>NLP</h2><ul><li><a href="https://github.com/AlexYangLi/ccks2019_el">ccks</a></li><li><a href="https://github.com/649453932/Bert-Chinese-Text-Classification-Pytorch">BERT</a></li><li><a href="https://github.com/Embedding/Chinese-Word-Vectors">word2vec</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>奇怪的知识</category>
      
    </categories>
    
    
    <tags>
      
      <tag>奇怪的知识</tag>
      
      <tag>常用</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo使用方法</title>
    <link href="/2021/02/01/%E5%AE%89%E8%A3%85-Hexo%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2021/02/01/%E5%AE%89%E8%A3%85-Hexo%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Hexo使用技巧"><a href="#Hexo使用技巧" class="headerlink" title="Hexo使用技巧"></a>Hexo使用技巧</h1><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul><li><p><a href="https://hexo.fluid-dev.com/docs/start/">Fluid</a></p></li><li><p><a href="https://hexo.io/zh-cn/">Hexo</a></p></li><li><p><a href="https://www.bilibili.com/video/BV1cW411A7Jx?t=201&amp;p=7">教程1</a></p></li><li><p><a href="https://www.bilibili.com/video/BV1Gt411z7av?t=109">教程2</a></p></li></ul><h2 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h2><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livescript">hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;文件名&quot;</span>   <span class="hljs-string">\\生成文件</span><br>hexo g  <span class="hljs-string">\\生成网页</span><br>hexo s -p <span class="hljs-number">5555</span>  <span class="hljs-string">\\运行服务器(5555端口号自己设置)</span><br></code></pre></td></tr></table></figure><h2 id="部署到GitHub"><a href="#部署到GitHub" class="headerlink" title="部署到GitHub"></a>部署到GitHub</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo d</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>奇怪的知识</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>不常用</tag>
      
      <tag>奇怪的知识</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
